<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grundrechenarten - SIU-Wizard</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/exercise.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
</head>
<body>
    <!-- Navigation Header -->
    <header class="exercise-header">
        <nav class="exercise-nav">
            <div class="nav-left">
                <a href="../../index.html" class="btn btn-secondary">‚Üê Zur√ºck zur √úbersicht</a>
            </div>
            <div class="nav-center">
                <h1>Grundrechenarten</h1>
            </div>
        </nav>
    </header>

    <div class="exercise-layout">
        <!-- Main Content Area -->
        <main class="exercise-main">
            <!-- Theory Section (Collapsible) -->
            <section class="theory-section" id="theorySection">
                <div class="theory-header" onclick="toggleTheory()">
                    <h2>üìö Theorie: Grundrechenarten & Termumformungen</h2>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="theory-content" id="theoryContent">
                    <div class="theory-grid">
                        <div class="theory-card">
                            <h3>Klammern aufl√∂sen</h3>
                            <p><strong>Positive Vorzeichen:</strong></p>
                            <p>$+(a + b) = a + b$</p>
                            <p><strong>Negative Vorzeichen:</strong></p>
                            <p>$-(a + b) = -a - b$</p>
                            <p>$-(a - b) = -a + b$</p>
                            <p><strong>Beispiel:</strong> $5 - (3 - 2) = 5 - 3 + 2 = 4$</p>
                        </div>
                        <div class="theory-card">
                            <h3>Ausmultiplizieren (Distributivgesetz)</h3>
                            <p>Ein Faktor wird mit jedem Summanden multipliziert:</p>
                            <p>$a \cdot (b + c) = a \cdot b + a \cdot c$</p>
                            <p>$a \cdot (b - c) = a \cdot b - a \cdot c$</p>
                            <p><strong>Beispiel:</strong> $3(x + 4) = 3x + 12$</p>
                        </div>
                        <div class="theory-card">
                            <h3>Ausklammern</h3>
                            <p>Gemeinsame Faktoren vor die Klammer ziehen:</p>
                            <p>$ab + ac = a(b + c)$</p>
                            <p>$ab - ac = a(b - c)$</p>
                            <p><strong>Beispiel:</strong> $6x + 9 = 3(2x + 3)$</p>
                        </div>
                        <div class="theory-card">
                            <h3>Vereinfachen von Termen</h3>
                            <p>Gleichartige Terme zusammenfassen:</p>
                            <p>$3x + 5x = 8x$</p>
                            <p>$7a - 2a + 4 = 5a + 4$</p>
                            <p><strong>Reihenfolge:</strong> Klammern ‚Üí Multiplizieren ‚Üí Zusammenfassen</p>
                        </div>
                    </div>
                    <div class="theory-tips">
                        <h4>üí° Wichtige Regeln:</h4>
                        <ul>
                            <li><strong>Vorzeichenregel:</strong> Minus vor Klammer √§ndert alle Vorzeichen in der Klammer</li>
                            <li><strong>Distributivgesetz:</strong> Multipliziere jeden Term in der Klammer</li>
                            <li><strong>Ausklammern:</strong> Finde den gr√∂ssten gemeinsamen Faktor</li>
                            <li><strong>Vereinfachen:</strong> Nur gleichartige Terme k√∂nnen addiert/subtrahiert werden</li>
                            <li><strong>Reihenfolge:</strong> Klammern zuerst, dann Punkt- vor Strichrechnung</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Exercise Content Area -->
            <div class="exercise-content">
                <!-- Exercise content will be dynamically inserted here -->
                <div class="exercise-question">
                    <h3>Aufgabe wird geladen...</h3>
                </div>
            </div>
        </main>

        <!-- Right Sidebar will be dynamically created -->
    </div>

    <!-- Exercise System Script -->
    <script src="../../js/exercise-system.js"></script>
    
    <script>
        // Define exercises for Grundrechenarten
        const grundrechnungsartenExercises = [
            // EINFACHE AUFGABEN (ohne Variablen)
            {
                difficulty: 'easy',
                question: 'L√∂se die Klammern auf (rechne noch nicht zusammen):<br><br>$8 - (3 + 2)$',
                answer: '8 - 3 - 2',
                unit: '',
                tolerance: 0,
                solution: 'Das Minus vor der Klammer √§ndert alle Vorzeichen in der Klammer:<br>$8 - (3 + 2) = 8 - 3 - 2$',
                explanation: 'Klammern aufl√∂sen mit negativem Vorzeichen'
            },
            {
                difficulty: 'easy',
                question: 'L√∂se die Klammern auf (rechne noch nicht zusammen):<br><br>$12 + (5 - 8)$',
                answer: '12 + 5 - 8',
                unit: '',
                tolerance: 0,
                solution: 'Das Plus vor der Klammer √§ndert die Vorzeichen nicht:<br>$12 + (5 - 8) = 12 + 5 - 8$',
                explanation: 'Klammern aufl√∂sen mit positivem Vorzeichen'
            },
            {
                difficulty: 'easy',
                question: 'Multipliziere aus (rechne in der Klammer nicht zusammen):<br><br>$4 \\times (7 + 2)$',
                answer: '28 + 8',
                unit: '',
                tolerance: 0,
                solution: 'Jeden Term in der Klammer mit 4 multiplizieren:<br>$4 \\times (7 + 2) = 4 \\times 7 + 4 \\times 2 = 28 + 8$',
                explanation: 'Ausmultiplizieren mit dem Distributivgesetz'
            },
            {
                difficulty: 'easy',
                question: 'Multipliziere aus:<br><br>$3 \\times (6 - 4)$',
                answer: '18 - 12',
                unit: '',
                tolerance: 0,
                solution: 'Jeden Term in der Klammer mit 3 multiplizieren:<br>$3 \\times (6 - 4) = 3 \\times 6 - 3 \\times 4 = 18 - 12$',
                explanation: 'Ausmultiplizieren bei Subtraktion'
            },
            {
                difficulty: 'easy',
                question: 'Klammere den gr√∂ssten gemeinsamen Faktor aus:<br><br>$12 + 8$',
                answer: '4(3 + 2)',
                unit: '',
                tolerance: 0,
                solution: 'Der gr√∂sste gemeinsame Faktor von 12 und 8 ist 4:<br>$12 + 8 = 4 \\times 3 + 4 \\times 2 = 4(3 + 2)$',
                explanation: 'Ausklammern des gr√∂ssten gemeinsamen Faktors'
            },
            {
                difficulty: 'easy',
                question: 'Vereinfache so weit wie m√∂glich:<br><br>$7 + 3 - 2 + 5$',
                answer: '13',
                unit: '',
                tolerance: 0,
                solution: 'Von links nach rechts rechnen:<br>$7 + 3 - 2 + 5 = 10 - 2 + 5 = 8 + 5 = 13$',
                explanation: 'Vereinfachen durch schrittweises Rechnen'
            },

            // MITTLERE AUFGABEN (mit einfachen Variablen)
            {
                difficulty: 'medium',
                question: 'L√∂se die Klammern auf:<br><br>$3x - (2x + 5)$',
                answer: '3x - 2x - 5',
                unit: '',
                tolerance: 0,
                solution: 'Das Minus vor der Klammer √§ndert alle Vorzeichen:<br>$3x - (2x + 5) = 3x - 2x - 5$',
                explanation: 'Klammern aufl√∂sen mit Variablen'
            },
            {
                difficulty: 'medium',
                question: 'Multipliziere aus:<br><br>$2(3x + 4)$',
                answer: '6x + 8',
                unit: '',
                tolerance: 0,
                solution: 'Jeden Term in der Klammer mit 2 multiplizieren:<br>$2(3x + 4) = 2 \\times 3x + 2 \\times 4 = 6x + 8$',
                explanation: 'Ausmultiplizieren mit Variablen'
            },
            {
                difficulty: 'medium',
                question: 'Klammere aus:<br><br>$6x + 9$',
                answer: '3(2x + 3)',
                unit: '',
                tolerance: 0,
                solution: 'Der gr√∂sste gemeinsame Faktor von 6 und 9 ist 3:<br>$6x + 9 = 3 \\times 2x + 3 \\times 3 = 3(2x + 3)$',
                explanation: 'Ausklammern mit Variablen'
            },
            {
                difficulty: 'medium',
                question: 'Vereinfache:<br><br>$5x + 3x - 2x + 7$',
                answer: '6x + 7',
                unit: '',
                tolerance: 0,
                solution: 'Gleichartige Terme zusammenfassen:<br>$5x + 3x - 2x + 7 = (5 + 3 - 2)x + 7 = 6x + 7$',
                explanation: 'Vereinfachen durch Zusammenfassen gleichartiger Terme'
            },
            {
                difficulty: 'medium',
                question: 'L√∂se auf und vereinfache:<br><br>$4(x + 2) - 3x$',
                answer: 'x + 8',
                unit: '',
                tolerance: 0,
                solution: 'Erst ausmultiplizieren, dann vereinfachen:<br>$4(x + 2) - 3x = 4x + 8 - 3x = x + 8$',
                explanation: 'Kombination von Ausmultiplizieren und Vereinfachen'
            },
            {
                difficulty: 'medium',
                question: 'Multipliziere aus:<br><br>$x(2x + 5)$',
                answer: '2x^2 + 5x',
                unit: '',
                tolerance: 0,
                solution: 'Jeden Term in der Klammer mit x multiplizieren:<br>$x(2x + 5) = x \\times 2x + x \\times 5 = 2x^2 + 5x$',
                explanation: 'Ausmultiplizieren mit Variablen als Faktor'
            },

            // SCHWERE AUFGABEN (mit mehreren Variablen und komplexeren Termen)
            {
                difficulty: 'hard',
                question: 'L√∂se die Klammern auf:<br><br>$2a - (3b - 4a + 5c)$',
                answer: '2a - 3b + 4a - 5c',
                unit: '',
                tolerance: 0,
                solution: 'Das Minus vor der Klammer √§ndert alle Vorzeichen:<br>$2a - (3b - 4a + 5c) = 2a - 3b + 4a - 5c$',
                explanation: 'Klammern aufl√∂sen mit mehreren Variablen'
            },
            {
                difficulty: 'hard',
                question: 'Multipliziere aus:<br><br>$(2x + 3)(x + 4)$',
                answer: '2x^2 + 8x + 3x + 12',
                unit: '',
                tolerance: 0,
                solution: 'Jeden Term der ersten Klammer mit jedem Term der zweiten multiplizieren:<br>$(2x + 3)(x + 4) = 2x \\times x + 2x \\times 4 + 3 \\times x + 3 \\times 4 = 2x^2 + 8x + 3x + 12$',
                explanation: 'Ausmultiplizieren von zwei Klammern'
            },
            {
                difficulty: 'hard',
                question: 'Klammere vollst√§ndig aus:<br><br>$12x^2y + 8xy^2 - 4xy$',
                answer: '4xy(3x + 2y - 1)',
                unit: '',
                tolerance: 0,
                solution: 'Gr√∂sster gemeinsamer Faktor ist 4xy:<br>$12x^2y + 8xy^2 - 4xy = 4xy \\times 3x + 4xy \\times 2y + 4xy \\times (-1) = 4xy(3x + 2y - 1)$',
                explanation: 'Ausklammern mit mehreren Variablen'
            },
            {
                difficulty: 'hard',
                question: 'Vereinfache vollst√§ndig:<br><br>$3(2x - y) + 2(x + 3y) - 4x$',
                answer: '4x + 3y',
                unit: '',
                tolerance: 0,
                solution: 'Schritt f√ºr Schritt:<br>$3(2x - y) + 2(x + 3y) - 4x$<br>$= 6x - 3y + 2x + 6y - 4x$<br>$= (6x + 2x - 4x) + (-3y + 6y)$<br>$= 4x + 3y$',
                explanation: 'Komplexe Termumformung mit mehreren Schritten'
            },
            {
                difficulty: 'hard',
                question: 'L√∂se auf und vereinfache:<br><br>$-(3a - 2b) + 4(a + b) - 2(2a - 3b)$',
                answer: '-3a + 12b',
                unit: '',
                tolerance: 0,
                solution: 'Schritt f√ºr Schritt aufl√∂sen:<br>$-(3a - 2b) + 4(a + b) - 2(2a - 3b)$<br>$= -3a + 2b + 4a + 4b - 4a + 6b$<br>$= (-3a + 4a - 4a) + (2b + 4b + 6b)$<br>$= -3a + 12b$',
                explanation: 'Komplexe Klammern mit negativen Vorzeichen'
            },
            {
                difficulty: 'hard',
                question: 'Vereinfache:<br><br>$2x(3x - 4) - x(x + 2) + 5x^2$',
                answer: '10x^2 - 10x',
                unit: '',
                tolerance: 0,
                solution: 'Erst ausmultiplizieren, dann vereinfachen:<br>$2x(3x - 4) - x(x + 2) + 5x^2$<br>$= 6x^2 - 8x - x^2 - 2x + 5x^2$<br>$= (6x^2 - x^2 + 5x^2) + (-8x - 2x)$<br>$= 10x^2 - 10x$',
                explanation: 'Ausmultiplizieren und Vereinfachen mit Potenzen'
            }
        ];

        function toggleTheory() {
            const content = document.getElementById('theoryContent');
            const icon = document.querySelector('.toggle-icon');
            
            if (content.style.display === 'none' || !content.style.display) {
                content.style.display = 'block';
                icon.textContent = '‚ñ≤';
            } else {
                content.style.display = 'none';
                icon.textContent = '‚ñº';
            }
        }

        // Initialize exercise system when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Create exercise system instance
            window.exerciseSystem = new ExerciseSystem('grundlagen', 'grundrechenarten', grundrechnungsartenExercises);
            
            // Track progress if parent window exists
            if (window.parent && window.parent.emWizard) {
                window.parent.emWizard.progressTracker.updateLastTopic(window.location.href);
            }
        });

        // Track exercise completion when page unloads
        window.addEventListener('beforeunload', function() {
            if (window.exerciseSystem && window.parent && window.parent.emWizard) {
                const progress = window.exerciseSystem.getOverallProgress();
                if (progress.completed > 0) {
                    window.parent.emWizard.progressTracker.markExerciseCompleted('grundlagen', 'grundrechenarten');
                }
            }
        });
    </script>
</body>
</html>